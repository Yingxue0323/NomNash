<div class="review-page-container">
    <!-- Restaurant Header -->
    <div class="header">
      <div class="restaurant-info">
        <h1 class="restaurant-name">{{ restaurant.name }}</h1>
        <p class="restaurant-description">{{ restaurant.description }}</p>
      </div>
      <div class="rating-summary">
        <div class="average-rating">{{ averageRating.toFixed(1) }}</div>
        <div class="stars">
          <app-star-rating [rating]="averageRating"></app-star-rating>
        </div>
        <div class="total-reviews">{{ totalReviews }} reviews</div>
      </div>
    </div>
  
    <!-- Distribution Bars -->
    <div class="rating-distribution">
      <div *ngFor="let pct of ratingDistribution; let i = index" class="bar-row">
        <span class="label">{{ 5 - i }}</span>
        <div class="bar-bg">
          <div class="bar-fill" [style.width.%]="pct"></div>
        </div>
      </div>
    </div>

    <!-- Write a Review -->
    <div class="write-review">
      <h3>Write a Review</h3>
  
      <!-- Star-rating selector -->
      <div class="rating-input">
        <label for="rating-select">Your Rating:</label>
        <select id="rating-select" [(ngModel)]="newRating">
          <option *ngFor="let r of [5,4,3,2,1]" [value]="r">
            {{ r }} Star{{ r > 1 ? 's' : '' }}
          </option>
        </select>
        <app-star-rating [rating]="newRating"></app-star-rating>
      </div>
  
      <textarea [(ngModel)]="newReview"
                rows="4"
                placeholder="Write your thoughts here..."></textarea>
      <button class="submit-review" (click)="postReview()">Post Review</button>
    </div>
  
    <!-- Reviews Section -->
    <div class="reviews-section">
      <h2>Reviews</h2>
  
      <!-- Sort Options -->
      <div class="sort-options">
        <button *ngFor="let opt of sortOptions"
                [class.active]="sortBy === opt"
                (click)="sortBy = opt">
          {{ opt }}
        </button>
      </div>
  
      <!-- Scrollable list of review cards -->
      <div class="review-list">
        <div *ngFor="let r of sortedReviews" class="review-card">
          <div class="review-header">
            <div class="reviewer-avatar">{{ r.name.charAt(0) }}</div>
            <div>
              <strong>{{ r.name }}</strong>
              <div class="review-meta">{{ r.meta }}</div>
            </div>
          </div>
          <div class="review-rating">
            <app-star-rating [rating]="r.rating"></app-star-rating>
          </div>
          <div class="review-body">{{ r.text }}</div>
        </div>
      </div>
    </div>
  
  </div>
  